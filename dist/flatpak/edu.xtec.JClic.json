{
  "id": "edu.xtec.JClic",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "19.08",
  "sdk": "org.freedesktop.Sdk",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.openjdk11"
  ],
  "finish-args": [
    "--filesystem=home",
    "--socket=fallback-x11",
    "--socket=wayland",
    "--device=dri",
    "--socket=pulseaudio",
    "--share=ipc",
    "--share=network",
    "--env=JAVA_HOME=/app/jre"
  ],
  "build-options": {
    "append-path": "/usr/lib/sdk/openjdk11/bin"
  },
  "cleanup-commands": [
    "sed -i 's,java -jar /usr/share/java/jclic.jar,/app/jre/bin/java -jar /app/bin/jclic.jar,g'              /app/bin/jclic",
    "sed -i 's,java -jar /usr/share/java/jclicauthor.jar,/app/jre/bin/java -jar /app/bin/jclicauthor.jar,g'  /app/bin/jclicauthor",
    "sed -i 's,/usr,/app,g'                                    /app/share/applications/edu.xtec.JClic.desktop",
    "sed -i 's,/usr,/app,g'                                    /app/share/applications/edu.xtec.JClic.Author.desktop",
    "sed -i 's,Icon=jclic,Icon=edu.xtec.JClic,g'               /app/share/applications/edu.xtec.JClic.desktop",
    "sed -i 's,Icon=jclicauthor,Icon=edu.xtec.JClic.Author,g'  /app/share/applications/edu.xtec.JClic.Author.desktop"
  ],
  "modules": [
    {
      "name": "openjdk",
      "buildsystem": "simple",
      "build-commands": [
        "/usr/lib/sdk/openjdk11/install.sh"
      ]
    },
    {
      "name": "jclic",
      "buildsystem": "simple",
      "build-commands": [
        "install -Dp -m 755 src/dist/linux/bin/jclic /app/bin/jclic",
        "install -Dp -m 755 src/dist/linux/bin/jclicauthor /app/bin/jclicauthor",
        "install -Dp -m 755 jar/jclic.jar /app/bin/jclic.jar",
        "install -Dp -m 755 jar/jclicauthor.jar /app/bin/jclicauthor.jar",
        "install -Dp -m 644 src/dist/linux/applications/jclic.desktop /app/share/applications/edu.xtec.JClic.desktop",
        "install -Dp -m 644 src/dist/linux/applications/jclicauthor.desktop /app/share/applications/edu.xtec.JClic.Author.desktop",
        "install -Dp -m 644 src/dist/linux/pixmaps/jclic.png /app/share/icons/hicolor/128x128/apps/edu.xtec.JClic.png",
        "install -Dp -m 644 src/dist/linux/pixmaps/jclicauthor.png /app/share/icons/hicolor/128x128/apps/edu.xtec.JClic.Author.png",
        "install -Dp -m 644 src/dist/linux/pixmaps/jclic.svg /app/share/icons/hicolor/scalable/apps/edu.xtec.JClic.svg",
        "install -Dp -m 644 src/dist/linux/pixmaps/jclicauthor.svg /app/share/icons/hicolor/scalable/apps/edu.xtec.JClic.Author.svg"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/projectestac/jclic/archive/v0.3.2.12.tar.gz",
          "sha256": "cba6fd285ee4949c0194ce56d19da8eb11d22c31a7d020475d11e2cbddca7b62",
          "dest": "src"
        },
        {
          "type": "archive",
          "url": "https://github.com/projectestac/jclic/releases/download/v0.3.2.12/jclic-0.3.2.12.zip",
          "sha256": "608cc6c4516a9d877aa832b0a52e9492dfe0f67015b836da80c5c2a5c20e4ee0",
          "dest": "jar"
        }
      ]
    }
  ]
}